<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<strong id="count"></strong>
url发送信息：<a target="_blank" href="http://a.com/public/index.php/index/index/test?type=publish&to=&content=%E6%B6%88%E6%81%AF%E5%86%85%E5%AE%B9">发送</a>
<h1 id="target" class="uid"></h1>
<center id="online_box"></center>
<textarea id="textarea" cols="50" rows="5"></textarea>
<button id="send" onclick="send();">发送信息</button>
<script src='//cdn.bootcss.com/socket.io/1.3.7/socket.io.js'></script>
<script>
 var uid = 12;
document.getElementById('target').innerHTML=uid;
	
	

// 连接服务端
var socket = io('http://a.com:9191');
// 触发服务端的chat message事件

   // 连接后登录
    socket.on('connect', function(){
    	socket.emit('login', uid);
    });
socket.emit('chat message', '欢迎您的加入！');

function send(){
	var mess=document.getElementById('textarea').value;
	//alert(mess);
socket.emit('chat message', mess);
}


// 服务端通过emit('chat message from server', $msg)触发客户端的chat message from server事件
socket.on('chat message from server', function(msg){
	document.getElementById('count').innerHTML=msg;
   // alert('get message:' + msg + ' from server');
});

socket.on('online_box', function(online_stat){
    $('#online_box').html(online_stat);
});
</script>
</body>
</html>
